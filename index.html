<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Python 小乐园 — 在线编程学习</title>
  <meta name="description" content="面向小朋友的 Python 在线编程学习工具，支持代码输入、语法检查和运行输出。">

  <!-- 样式 -->
  <link rel="stylesheet" href="css/style.css">

  <!-- CodeMirror 5 CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/dracula.min.css">

  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@0.263.1/dist/umd/lucide.min.js"></script>

  <!-- Pyodide -->
  <script src="https://cdn.jsdelivr.net/pyodide/v0.26.4/full/pyodide.js"></script>

  <!-- Favicon -->
  <link rel="icon"
    href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🐍</text></svg>">
</head>

<body>
  <!-- 加载覆盖层 -->
  <div class="loading-overlay" id="loading-overlay">
    <div class="loading-icon">
      <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
        stroke-linecap="round" stroke-linejoin="round">
        <path d="M12 2a10 10 0 1 0 10 10" />
      </svg>
    </div>
    <div class="loading-text" id="loading-text">正在准备 Python 环境</div>
    <div class="loading-sub">首次加载可能需要几秒钟</div>
  </div>

  <!-- 主容器 -->
  <div class="app-container">
    <!-- 顶部导航栏 -->
    <header class="app-header">
      <div class="header-left">
        <div class="logo">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="var(--accent-green)" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <polyline points="16 18 22 12 16 6" />
            <polyline points="8 6 2 12 8 18" />
          </svg>
          <h1 class="app-title">Python 小乐园</h1>
        </div>
        <p class="app-subtitle">写代码 · 学编程 · 玩转 Python</p>
      </div>
      <div class="header-right">
        <div class="example-dropdown">
          <button class="btn btn-ghost" id="example-btn">
            <i data-lucide="book-open" class="icon"></i>
            <span>示例代码</span>
            <i data-lucide="chevron-down" class="icon icon-sm"></i>
          </button>
          <div class="example-menu" id="example-menu"></div>
        </div>
        <button class="btn btn-ghost" id="clear-btn">
          <i data-lucide="trash-2" class="icon"></i>
          <span>清空</span>
        </button>
        <button class="btn btn-primary" id="run-btn">
          <i data-lucide="play" class="icon"></i>
          <span class="btn-text">运行</span>
        </button>
      </div>
    </header>

    <!-- 分栏主体 -->
    <main class="split-panel">
      <!-- 左侧：代码编辑器 -->
      <section class="panel panel-editor">
        <div class="panel-header">
          <div class="panel-title">
            <i data-lucide="file-code-2" class="icon"></i>
            <span>代码编辑区</span>
          </div>
          <div class="panel-badge" id="syntax-badge">
            <i data-lucide="check-circle" class="icon icon-sm"></i>
            <span>就绪</span>
          </div>
        </div>
        <div class="panel-body editor-body">
          <div id="editor-container"></div>
        </div>
      </section>

      <!-- 右侧：运行结果 -->
      <section class="panel panel-output">
        <div class="panel-header">
          <div class="panel-title">
            <i data-lucide="terminal" class="icon"></i>
            <span>运行结果</span>
          </div>
          <button class="btn-icon" id="clear-output-btn" title="清空输出">
            <i data-lucide="x" class="icon icon-sm"></i>
          </button>
        </div>
        <div class="panel-body output-body">
          <canvas id="turtle-canvas" class="turtle-canvas"></canvas>
          <div class="output-content" id="output-content">
            <div class="output-placeholder">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
                stroke-linecap="round" stroke-linejoin="round" class="placeholder-icon">
                <path d="M12 20h9" />
                <path d="M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z" />
              </svg>
              <p>运行代码后，结果会显示在这里</p>
              <p class="hint">快捷键 Ctrl + Enter 运行</p>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- 状态栏 -->
    <footer class="status-bar" id="status-bar">
      <div class="status-left">
        <span class="status-dot" id="status-dot"></span>
        <span class="status-text" id="status-text">正在加载 Python 引擎...</span>
      </div>
      <div class="status-right">
        <span>Ctrl+Enter 运行</span>
      </div>
    </footer>
  </div>

  <!-- CodeMirror 5 JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/python/python.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/selection/active-line.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/edit/matchbrackets.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/edit/closebrackets.min.js"></script>

  <!-- JS -->
  <script src="js/turtle-canvas.js"></script>
  <script src="js/examples.js"></script>
  <script src="js/editor.js"></script>
  <script src="js/runner.js"></script>
  <script src="js/app.js"></script>

  <!-- Init Lucide Icons -->
  <script>document.addEventListener('DOMContentLoaded', () => lucide.createIcons());</script>
</body>

</html>